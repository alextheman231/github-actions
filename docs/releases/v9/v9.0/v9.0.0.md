# v9.0.0 (Major Release)

<!-- alex-c-line-start-release-status -->
**Status**: Released
<!-- alex-c-line-end-release-status -->

<!-- alex-c-line-start-release-summary -->
This is a new major release of the `github-actions` package. It has the potential to introduce breaking changes that may require a large amount of refactoring. Please read the description of changes and migration notes below for more information.
<!-- alex-c-line-end-release-summary -->

## Description of Changes

- Change all reusable workflows to use a new pattern.
    - Instead of having the main workflow be triggered on either `workflow_call` or by other means, we now instead have the main workflows **only** triggerable by `workflow_call`, and every other call site will then have to manually call it, **including** this repository.
    - As such, we will now start every file that is for internal use in this repository with an underscore `_`, and they will generally be the ones to call the reusable workflows in this repository.
    - Files not prefixed by `_` will be considered as allowed for reuse in other repositories of mine, and must generally only be triggerable by `workflow_call`.
    - This decision should help to make actions testing so much nicer, as it will allow us to test out call site behaviour before releasing rather thajn only figure out at the call sites themselves and therefore need to create patch releases as a result.
- Add a `comment-outdated` workflow for use on dependency update pull requests, so that we can comment on any outdated dependencies so we can keep track of how far behind we are if we ever end up pinning any.

## Migration Notes

- For the most part, call sites should be more or less the same per repository, but you will at least need to change references to `commit-version-change` as it must now be referenced three times per workflow to account for major, minor, and patch workflows. For example:

```yml
name: Commit a version change
on:
  push:
    branches: ["main"]
  workflow_dispatch:

jobs:
  check-major-version:
    permissions:
      contents: write
      pull-requests: write
    uses: alextheman231/github-actions/.github/workflows/commit-version-change.yml@v9.0.0
    with:
      version-type: major
      create-feature-docs: false
    secrets:
      APP_ID: ${{ secrets.ALEX_UP_BOT_APP_ID }}
      APP_PRIVATE_KEY: ${{ secrets.ALEX_UP_BOT_PRIVATE_KEY }}

  check-minor-version:
    permissions:
      contents: write
      pull-requests: write
    uses: alextheman231/github-actions/.github/workflows/commit-version-change.yml@v9.0.0
    with:
      version-type: minor
      create-feature-docs: false
    secrets:
      APP_ID: ${{ secrets.ALEX_UP_BOT_APP_ID }}
      APP_PRIVATE_KEY: ${{ secrets.ALEX_UP_BOT_PRIVATE_KEY }}

  check-patch-version:
    permissions:
      contents: write
      pull-requests: write
    uses: alextheman231/github-actions/.github/workflows/commit-version-change.yml@v9.0.0
    with:
      version-type: patch
      create-feature-docs: false
    secrets:
      APP_ID: ${{ secrets.ALEX_UP_BOT_APP_ID }}
      APP_PRIVATE_KEY: ${{ secrets.ALEX_UP_BOT_PRIVATE_KEY }}
```

- Of course, I would recommend not copying the above out exactly as is, and instead pin it to a SHA. I'd recommend first copying the examples (changing the secrets if they don't apply to you) then applying `actions-up` or equivalent to the workflows to get the latest SHA.

## Additional Notes

- Unfortunately, we do have to use that underscore prefix rather than, say, put the workflows in `.github/workflows/internal`, for example, as `actions-up` will only update workflows if they are specifically in `.github/workflows`. It will not try and search `.github/workflows` recursively.
- The limitations of the update tooling does unfortunately put us in this position where we can't really change the directory structure too much otherwise we will miss out on actions updates, which sucks!
- That said, I think this change is still very much worth it as it will make testing reusable workflows so much nicer going forward, even if at the cost of a slightly bigger `.github/workflows` folder.
