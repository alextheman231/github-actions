# v8.1.1 (Patch Release)

<!-- alex-c-line-start-release-status -->
**Status**: Released
<!-- alex-c-line-end-release-status -->

<!-- alex-c-line-start-release-summary -->
This is a new patch release of the `github-actions` package. It fixes issues with the package and should require no refactoring. Please read the description of changes below.
<!-- alex-c-line-end-release-summary -->

## Description of Changes

- Welcome to another trip to Leaky Implementation Zone, act 2, everyone!
- So... get this, right? If you use a reusable workflow, the check name as it shows in the UI ends up being `base-name / workflow-name`, where `base-name` is the name of the caller and `workflow-name` is the workflow being called.
    - Yes, the space before and after the separator is intentional. I hate it. I really do.
- That overall workflow name above also ends up being the job name as a whole, so if you want to require that job passes for your pull request checks to pass, that's the name you must reference.
- HOWEVER, let's now say that you want to conditionally run that job, where if you're on a certain branch, the workflow skips, whereas if you're on any other branch, the workflow runs. For example, the `source-code-ci` job in `package-ci` runs on all branches except `alex-up-bot/change-*-version` branches.
- If you try putting conditional skip logic at the caller level, then the job that skips ends up just being `base-name`, and not `base-name / workflow-name`. What that means is that, if you then want to require `base-name / workflow-name`, that never reports any status because it's the `base-name` job that got skipped. Example:

in package-ci.yml:
```yml
jobs:
  version-change-ci: # Job name is version-change-ci / version-change-ci
    if: ${{ github.head_ref == 'alex-up-bot/change-major-version' || github.head_ref == 'alex-up-bot/change-minor-version' || github.head_ref == 'alex-up-bot/change-patch-version' }}
    uses: ./.github/workflows/version-change-ci.yml
```

- I know, it's stupid. Like, why not allow us to match job names by glob or by regex, or just SOMETHING to say that all jobs under `base-name` get skipped regardless of if there's a reusable workflow nested inside of it or not?!
- The fix for this, I think, is to move the conditional checks inside of the reusable workflows themselves. Example:

In version-change-ci.yml:
```yml
jobs:
  version-change-ci:
    if: ${{ github.head_ref == 'alex-up-bot/change-major-version' || github.head_ref == 'alex-up-bot/change-minor-version' || github.head_ref == 'alex-up-bot/change-patch-version' }}
    steps:
      - name: Exit workflow with error because it's had enough of this stupidity
        run: exit 1
```

In package-ci.yml
```yml
jobs:
  version-change-ci:
    uses: ./.github/workflows/version-change-ci.yml # Does the conditional check internally so the skipped check is version-change-ci / version-change-ci
```

And I hate it.
- I hate it because now the reusable workflows now need to manage conditional logic that they should not have to care about. That conditional logic should be living at the CALLER level, where whether we run the workflow or not is controlled by the caller. Having it live at the workflow level just feels so wrong and gets rid of the fact that pure logic should be living in the reusable workflow!

## Additional Notes

- Please, someone tell me that there's a replacement for GitHub Actions coming around at some point, because GitHub Actions really does feel like it was duct-taped together in a day rather than a well-thought out system. Which, it probably *should* feel like a well-thought out system considering that it's what we use to verify other well-thought out systems!

